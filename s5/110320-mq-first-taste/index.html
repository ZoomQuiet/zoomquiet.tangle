<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.7: http://docutils.sourceforge.net/" />
<meta name="version" content="S5 1.1" />
<title>MQ初品</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id$
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<script src="ui/freedom/slides.js" type="text/javascript"></script>
<link rel="stylesheet" href="ui/freedom/slides.css"
      type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/freedom/outline.css"
      type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/freedom/print.css"
      type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/freedom/opera.css"
      type="text/css" media="projection" id="operaFix" />
</head>
<body>
<div class="layout">
<div id="controls"></div>
<div id="currentSlide"></div>
<div id="header">

</div>
<div id="footer">
<h1>MQ初品</h1>
<h2><a class="reference external" href="http://code.google.com/p/openbookproject/wiki/ZoomQuiet">Zoom.Quiet</a> v11.03.2 <a class="reference external" href="http://creativecommons.org/licenses/by-nc-sa/2.5/cn/"><img alt="(CC)by-nc-sa 许可证" src="i/icon/cc-byncnd-80x15.png" /></a> 推荐用 <a class="reference external" href="http://www.mozilla.com/firefox/">FireFox</a> 获得最佳游览效果</h2>
</div>
</div>
<div class="presentation">
<div class="slide" id="slide0">
<h1 class="title">MQ初品</h1>

<!-- Definitions of interpreted text roles (classes) for S5/HTML data. -->
<!-- This data file has been placed in the public domain. -->
<!-- Colours
======= -->
<!-- Text Sizes
========== -->
<!-- Display in Slides (Presentation Mode) Only
========================================== -->
<!-- Display in Outline Mode Only
============================ -->
<!-- Display in Print Only
===================== -->
<!-- Display in Handout Mode Only
============================ -->
<!-- Incremental Display
=================== -->
<p>～用消息来解耦I/O延迟 (powered by rst2S5)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Authors:</th><td class="field-body"><a class="reference external" href="mailto:zoomquiet+sns&#64;gmai.com">Zoom.Quiet</a></td>
</tr>
<tr class="field"><th class="field-name">URL:</th><td class="field-body"><a class="reference external" href="http://zoomquiet.org/res/s5/110320-mq-first-taste/">http://zoomquiet.org/res/s5/110320-mq-first-taste/</a></td>
</tr>
</tbody>
</table>
<!-- This document has been placed in the CC domain. -->
<!-- 图片定义区 -->

</div>
<div class="slide" id="id3">
<h1>&lt;免责/&gt;</h1>
<div class="handout container">
山寨的，非业界公认的，个人体验为基础!
<a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<p class="takahashi1">参考所有同好行为总结而得</p>
<ul class="takahashi1 incremental simple">
<li>一切资料来自网络互动挖掘</li>
<li>一切想法来自日常学习工作</li>
<li>一切体悟来自各种沟通交流</li>
<li>一切知识来自社区分享印证</li>
<li>一切经验来自个人失败体验</li>
</ul>
</div>
<div class="slide" id="brief">
<h1>&lt;brief/&gt;</h1>
<div class="handout container">
简单想,简单试,简单用... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<ul class="takahashi simple">
<li><span class="orange">5' 背景故事</span></li>
<li><span class="silver">10' 演变和解决</span></li>
<li><span class="silver">10' 清点回顾</span></li>
<li><span class="silver">5'自由沟通</span></li>
</ul>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id4">
<h1>背景</h1>
<div class="handout container">
已经有了... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<p class="takahashi9">SSO</p>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id5">
<h1>需求</h1>
<div class="handout container">
问题是... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<p class="takahashi">口令管理</p>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="ldap">
<h1>LDAP</h1>
<div class="handout container">
问题是... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<a class="takahashi8 reference external image-reference" href="http://www.openldap.org/"><img alt="i/logo/LDAPworm.gif" class="align-center" src="i/logo/LDAPworm.gif" style="width: 457.5px; height: 180.0px;" /></a>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id6">
<h1>选择</h1>
<div class="handout container">
这货忒复杂! <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<a class="takahashi8 reference external image-reference" href="https://oss.gonicus.de/labs/gosa/"><img alt="i/logo/gosa-logo.png" class="align-center" src="i/logo/gosa-logo.png" style="width: 580.0px; height: 176.0px;" /></a>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id7">
<h1>选择</h1>
<div class="handout container">
这货忒依赖! <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<a class="takahashi8 reference external image-reference" href="#"><img alt="i/snap/chpasswd-2011-03-18_688x420_scrot.png" class="align-center" src="i/snap/chpasswd-2011-03-18_688x420_scrot.png" style="width: 699.0px; height: 431.0px;" /></a>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id8">
<h1>本质上</h1>
<div class="handout container">
也就3个命令 <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<a class="takahashi8 reference external image-reference" href="#"><img alt="i/map/ldap-acl-cil.png" class="align-center" src="i/map/ldap-acl-cil.png" style="width: 694.0px; height: 344.0px;" /></a>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id9">
<h1>作出來</h1>
<div class="handout container">
就复杂了 <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<a class="takahashi8 reference external image-reference" href="#"><img alt="i/map/ldap-acl-web.png" class="align-center" src="i/map/ldap-acl-web.png" style="width: 464.4px; height: 414.0px;" /></a>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id10">
<h1>问题</h1>
<div class="handout container">
等待 <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<p class="takahashi8">SMTP</p>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id11">
<h1>&lt;brief/&gt;</h1>
<div class="handout container">
简单想,简单试,简单用... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<ul class="takahashi simple">
<li><span class="gray">5' 背景故事</span></li>
<li><span class="orange">10' 演变和解决</span></li>
<li><span class="silver">10' 清点回顾</span></li>
<li><span class="silver">5'自由沟通</span></li>
</ul>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id12">
<h1>尝试</h1>
<div class="handout container">
没整成... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<p class="takahashi8">线程</p>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id13">
<h1>消息吧</h1>
<div class="handout container">
立即的... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<p class="takahashi8"><a class="reference external" href="http://www.rockstarprogrammer.org/post/2008/oct/04/what-matters-asynchronous-job-queue/">MQ</a></p>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id14">
<h1>什么?</h1>
<div class="handout container">
当然的... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<a class="takahashi8 reference external image-reference" href="http://www.verycd.com/entries/506739/"><img alt="i/foto/MaggiQ.jpg" class="align-center" src="i/foto/MaggiQ.jpg" style="width: 403.0px; height: 550.0px;" /></a>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id15">
<h1>理解</h1>
<div class="handout container">
先进先出... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<p class="takahashi10">栈</p>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id16">
<h1>选择</h1>
<div class="handout container">
豆聊... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<p class="takahashi4"><a class="reference external" href="https://github.com/kr/beanstalkd/wiki/client-libraries">beanstalkd</a></p>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id17">
<h1>业务流程</h1>
<div class="handout container">
加入MQ... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<a class="takahashi8 reference external image-reference" href="#"><img alt="i/map/mq-reset-flow_wsd-napkin.png" class="align-center" src="i/map/mq-reset-flow_wsd-napkin.png" style="width: 783.6px; height: 423.6px;" /></a>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id18">
<h1>植入</h1>
<div class="handout container">
最终版本的消息抛出... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__zqecho</span>(logtype,matter):
    beanstalk <span style="color: #666666">=</span> beanstalkc<span style="color: #666666">.</span>Connection(host<span style="color: #666666">=</span><span style="color: #BA2121">&#39;127.0.0.1&#39;</span>, port<span style="color: #666666">=11300</span>,parse_yaml<span style="color: #666666">=</span><span style="color: #008000">True</span>)
    beanstalk<span style="color: #666666">.</span>use(logtype)
    beanstalk<span style="color: #666666">.</span>put(matter)
    beanstalk<span style="color: #666666">.</span>close()
    <span style="color: #008000; font-weight: bold">return</span>
</pre></div>
<div class="notes container">
<ul class="simple">
<li>swallower.py</li>
</ul>
</div>
</div>
<div class="slide" id="e-g">
<h1>e.g 首页</h1>
<div class="handout container">
测试业务日志.. <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #AA22FF">@route</span>(<span style="color: #BA2121">&#39;</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">/&#39;</span><span style="color: #666666">%</span>ini<span style="color: #666666">.</span>urlprefix)
<span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">index</span>():
    __urlog(<span style="color: #BA2121">&quot;INFO&quot;</span>,<span style="color: #BA2121">&quot;idx++&quot;</span>)
    <span style="color: #008000; font-weight: bold">return</span> template(<span style="color: #BA2121">&#39;index.tpl&#39;</span>,urlprefix<span style="color: #666666">=</span>ini<span style="color: #666666">.</span>urlprefix)
</pre></div>
<div class="notes container">
<ul class="simple">
<li>swallower.py</li>
</ul>
</div>
</div>
<div class="slide" id="e-g-urlog">
<h1>e.g __urlog</h1>
<div class="handout container">
日志消息丢出器.. <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__urlog</span>(level,msg):
    urlmsg <span style="color: #666666">=</span> <span style="color: #BA2121">&quot;</span><span style="color: #BB6688; font-weight: bold">%.4f</span><span style="color: #BA2121">|</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">|</span><span style="color: #BB6688; font-weight: bold">%s</span><span style="color: #BA2121">&quot;</span><span style="color: #666666">%</span>(time<span style="color: #666666">.</span>time(),level,msg)
    __zqecho(<span style="color: #BA2121">&quot;LOG&quot;</span>
        ,base64<span style="color: #666666">.</span>urlsafe_b64encode(urlmsg)
        )
</pre></div>
<div class="notes container">
<ul class="simple">
<li>swallower.py</li>
</ul>
</div>
</div>
<div class="slide" id="swallower-py">
<h1>swallower.py</h1>
<div class="handout container">
吞食者... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">while</span> <span style="color: #008000">True</span>:
    job <span style="color: #666666">=</span> beanstalk<span style="color: #666666">.</span>reserve()
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #BA2121">&quot;LOG&quot;</span> <span style="color: #666666">==</span> job<span style="color: #666666">.</span>stats()[<span style="color: #BA2121">&#39;tube&#39;</span>]:
        __rlog(beanstalk,job)
    <span style="color: #008000; font-weight: bold">elif</span> <span style="color: #BA2121">&quot;MAIL&quot;</span> <span style="color: #666666">==</span> job<span style="color: #666666">.</span>stats()[<span style="color: #BA2121">&#39;tube&#39;</span>]:
        __mail(beanstalk,job)
</pre></div>
<div class="notes container">
<ul class="simple">
<li>swallower.py</li>
</ul>
</div>
</div>
<div class="slide" id="mail">
<h1>__mail()</h1>
<div class="handout container">
在用的邮件书记員... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__mail</span>(beanstalk,job):
    body <span style="color: #666666">=</span> base64<span style="color: #666666">.</span>urlsafe_b64decode(job<span style="color: #666666">.</span>body)
    minfo <span style="color: #666666">=</span> <span style="color: #008000">eval</span>(body)
    <span style="color: #008000; font-weight: bold">if</span> <span style="color: #BA2121">&#39;local&#39;</span> <span style="color: #666666">==</span> minfo[<span style="color: #BA2121">&#39;smtp_type&#39;</span>]:
        <span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">plugins.smtploc</span> <span style="color: #008000; font-weight: bold">import</span> mail
    eles:
        <span style="color: #008000; font-weight: bold">from</span> <span style="color: #0000FF; font-weight: bold">plugins.smtpgml</span> <span style="color: #008000; font-weight: bold">import</span> mail
    job<span style="color: #666666">.</span>delete()
</pre></div>
<div class="notes container">
<ul class="simple">
<li>swallower.py</li>
</ul>
</div>
</div>
<div class="slide" id="id19">
<h1>&lt;brief/&gt;</h1>
<div class="handout container">
简单想,简单试,简单用... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<ul class="takahashi simple">
<li><span class="gray">5' 背景故事</span></li>
<li><span class="gray">10' 演变和解决</span></li>
<li><span class="orange">10' 清点回顾</span></li>
<li><span class="silver">5'自由沟通</span></li>
</ul>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id20">
<h1>时间消耗:初期</h1>
<div class="handout container">
集中力哪! <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<ul class="takahashi incremental simple">
<li>5.0D 决策重作轮子</li>
<li>1.0H Bottle 学习</li>
<li>0.5H 核心命令测试</li>
<li>2.0H 本地环境准备</li>
<li>2.5H 完成基本网站</li>
</ul>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id21">
<h1>时间消耗:引入MQ</h1>
<div class="handout container">
集中力哪! <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<ul class="takahashi incremental simple">
<li>25' 决策上MQ</li>
<li>1.0H Beanstalkd 学习</li>
<li>1.5H 引入MQ</li>
<li>2.0H 本地开发测试</li>
<li>4.0H 生产环境部署</li>
</ul>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id22">
<h1>时间消耗:重构</h1>
<div class="handout container">
集中力哪! <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<ul class="takahashi incremental simple">
<li>5次重构</li>
<li>平均每次 1.0H</li>
<li>平均每次中断 3次</li>
<li>平均每次全情投入 &lt;15'</li>
</ul>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id23">
<h1>配置</h1>
<div class="handout container">
.ini;.py;内置字典;YAML;... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Borg</span>():
    __collective_mind <span style="color: #666666">=</span> {}
    <span style="color: #008000; font-weight: bold">def</span> <span style="color: #0000FF">__init__</span>(<span style="color: #008000">self</span>):
        <span style="color: #008000">self</span><span style="color: #666666">.</span>__dict__ <span style="color: #666666">=</span> <span style="color: #008000">self</span><span style="color: #666666">.</span>__collective_mind
    <span style="color: #408080; font-style: italic"># ...&lt; &lt;configures&gt; &gt;</span>
ini <span style="color: #666666">=</span> Borg()
</pre></div>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="supervisor">
<h1>Supervisor</h1>
<div class="handout container">
好用的进程远程管理服务... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<a class="takahashi reference external image-reference" href="http://supervisord.org/"><img alt="supervisord" class="align-center" src="i/snap/supervisor-2011-03-19_817x289_scrot.png" style="width: 993.6px; height: 360.0px;" /></a>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="bottle">
<h1>Bottle的模板</h1>
<div class="handout container">
简洁,有包含,可用!... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">%include header title=&#39;notify@ &#39;

<span style="color: #008000; font-weight: bold">&lt;h2&gt;</span>== notify @ <span style="color: #008000; font-weight: bold">&lt;a</span> <span style="color: #7D9029">href=</span><span style="color: #BA2121">&quot;{{urlprefix}}/&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
    lpasswd.py<span style="color: #008000; font-weight: bold">&lt;/a&gt;</span> ==<span style="color: #008000; font-weight: bold">&lt;/h2&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;p&gt;</span>{{alert}}::<span style="color: #008000; font-weight: bold">&lt;/p&gt;</span>

%include footer4notify
</pre></div>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id24">
<h1>&lt;brief/&gt;</h1>
<div class="handout container">
简单想,简单试,简单用... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<ul class="takahashi simple">
<li><span class="gray">5' 背景故事</span></li>
<li><span class="gray">10' 演变和解决</span></li>
<li><span class="gray">10' 清点回顾</span></li>
<li><span class="orange">5'自由沟通</span></li>
</ul>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id25">
<h1>总之</h1>
<div class="handout container">
期望记住的~单位时间能记住的只有7+-2 个 <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<ul class="incremental takahashi simple">
<li>MQ应该简单用</li>
<li>解耦I/O依赖得业务重构</li>
<li>调试很烦 ;-(</li>
<li>不要用 Ubuntu One 作工作备份</li>
<li><a class="reference external" href="https://bitbucket.org/ZoomQuiet/zqlogging/src">ZqLogging</a> 发布</li>
</ul>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="discuss">
<h1>&lt;discuss/&gt;</h1>
<div class="handout container">
<a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<p class="takahashi8">Q&amp;A</p>
<p class="takahashi0">...</p>
<p class="takahashi0"><a class="reference external" href="http://zoomquiet.org/res/s5/110311-why-km">http://zoomquiet.org/res/s5/110311-why-km</a></p>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id26">
<h1>最后...</h1>
<div class="handout container">
好书推荐... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<a class="takahashi reference external image-reference" href="http://book.douban.com/subject/5916234/"><img alt="番茄工作法图解" class="align-center" src="i/s4599081-pomodoro.jpg" style="width: 300.0px; height: 441.0px;" /></a>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id27">
<h1>最后的最后...</h1>
<div class="handout container">
好书推荐... <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<a class="takahashi reference external image-reference" href="http://book.douban.com/subject/4760725/"><img alt="讲演之禅" class="align-center" src="i/s4279952-zen4talk.jpg" style="width: 315.0px; height: 423.0px;" /></a>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id28">
<h1>&lt;版本/&gt;</h1>
<div class="handout container">
<a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<ul class="simple">
<li>110319 增补代码分享</li>
<li>110318 增补dot图谱</li>
<li>110317 增补MaggiQ 照片</li>
<li>110315 为珠三角技术沙龙创建</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">反馈:</th><td class="field-body"><a class="reference external" href="mailto:Zoom.Quiet&#64;gmail.com">Zoom.Quiet&#64;gmail.com</a></td>
</tr>
<tr class="field"><th class="field-name">查阅:</th><td class="field-body"><a class="reference external" href="http://zoomquiet.org/res/s5/110320-mq-first-taste/">http://zoomquiet.org/res/s5/110320-mq-first-taste/</a></td>
</tr>
</tbody>
</table>
</div>
<div class="slide" id="id29">
<h1><a class="reference external" href="http://www.meyerweb.com/eric/tools/s5/">S5</a></h1>
<div class="handout container">
纯HTML 幻灯撰写框架!... <img alt="lr_s5" src="i/levelradar_s5.png" /></div>
<ul class="simple">
<li>S<sup>5</sup>== a <span class="orange">S</span> imple <span class="orange">S</span> tandards-Based <span class="orange">S</span> lide <span class="orange">S</span> how <span class="orange">S</span> ystem</li>
</ul>
<blockquote>
<ul class="simple">
<li>仅仅依靠 CSS+JS 的HTML格式幻灯演示框架</li>
</ul>
</blockquote>
<ul class="simple">
<li>我的编辑环境: <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/LeoEnvironment"><img alt="LeoProse" class="align-top" src="pix/LeoProse.gif" style="width: 81.0px; height: 42.0px;" /></a> ~ <a class="reference external" href="http://en.wikipedia.org/wiki/Literate_programming">文学化编辑器</a></li>
</ul>
<a class="reference external image-reference" href="http://wiki.woodpecker.org.cn/moin/LeoEnvironment"><img alt="pix/2010-01-18-230729_605x421_leo.png" class="align-center" src="pix/2010-01-18-230729_605x421_leo.png" style="width: 605.0px; height: 421.0px;" /></a>
<div class="notes container">
<ul class="simple">
<li></li>
</ul>
</div>
</div>
<div class="slide" id="id30">
<h1>&lt;Zoom.Quiet/&gt;</h1>
<div class="handout container">
本命+1,有娃没车,长年大妈  <a class="reference external" href="http://wiki.woodpecker.org.cn/moin/ZoomQuiet"><img alt="是也乎;-)" src="i/id/zoomquiet_1-1_outline.png" /></a></div>
<img alt="是也乎,是也乎" class="takahashi align-center" src="i/foto/niuniu-110316.jpeg" style="width: 440.0px; height: 440.0px;" />
</div>
</div>
</body>
</html>
